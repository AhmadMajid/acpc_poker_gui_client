#join_match_form
  = form_tag join_match_url, remote: true, class: 'form-horizontal' do
    - matches_to_join = Match.all.select { |m| m.opponent_names && m.opponent_names.include?(ApplicationDefs::HUMAN_OPPONENT_NAME) && m.slices.empty? }
    - match_names = matches_to_join.map { |m| m.match_name }
    .control-group
      .control-labels
        %label.control-label.required= '<abbr title="required">*</abbr> Match name'.html_safe
      .controls
        = select_tag :match_name, options_for_select(match_names), required: true, disabled: matches_to_join.empty?
    .control-group
      .control-labels
        %label.control-label.required= '<abbr title="required">*</abbr> Seat'.html_safe
      .controls
        - human_seat_options = matches_to_join.inject({}) do |hash, match|
          - hash[match.match_name] = match.human_opponent_seats.map { |s| s + 1 }
          - hash
        = select_tag :seat, grouped_options_for_select(human_seat_options)
    .form-actions
      - join_match_label = 'Join match'
      = submit_tag join_match_label, class: 'btn btn-primary', data: { disable_with: join_match_label }, disabled: matches_to_join.empty?, id: 'join_match'
:javascript
  DynamicSelector.makeDynamic('#match_name', '#seat')
  DynamicSelector.selectDefault('#match_name')